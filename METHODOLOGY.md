В своем исследовании энергопотребления браузеров мы хотим воспроизвести типичные пользовательские сценарии для самых посещаемых сайтов.
Это поиск, почта, соцсети, образование, развлечения, а именно:
1. yandex.ru
1. youtube.com
1. techradar.com
1. reddit.com
1. ixbt.com
1. vk.com
1. habrahabr.ru

В тесте имитируются основные действия пользователя:
1. Запуск браузера
1. Разворачивание браузера на полный экран
1. Открытие и закрытие вкладок
1. Переключение между вкладками
1. Пролистывание страницы 

Эти действия автоматизированы специальной программой, она выполняет их по сценарию, с точными временными задержками.
В качестве отправной точки для нее мы использовали тест https://blogs.windows.com/windowsexperience/2016/09/15/edge-battery-anniversary-update/#HOdBF4msYagJzrBo.97 , научили его работать с Яндекс.Браузером, внесли в него ряд улучшений.
При этом мы моделируем "среднего" пользователя, у которого не очень быстрый интернет, для этого мы искусственно увеличили время отклика серверов.
В среднем, как показывают исследования(https://hardware.metrics.mozilla.com), у пользователей не очень мощные компьютеры с небольшим количеством оперативной памяти, медленным жестким диском. Оказалось что проводить измерения на таких машинах очень сложно - получается очень большой разброс результатов из-за непредсказуемого характера работы машины в многозадачном окружении. По этому мы старались найти золотую середину, взяв с одной стороны не самый мощный компьютер, но с другой чтобы он хорошо справлялся с нагрузкой. В итоге мы выбрали ноутбук без дискретной видеокарты, которому уже 5 лет, но он имеет SSD-диск и 8 ГБ RAM. 


Измерения проводились на ноутбуке с заряженной до 100% батареей. На нем в цикле запускался тест, и засекалось время до полного разряда батареи.
Так как нашей целью является измерение энергопотребления именно браузера, то мы старались минимизировать влияние других факторов, для этого: 
1. Антивирус полностью выключен, либо отсутствует, и не делает регулярных фоновых проверок в момент работы тестов.
1. В ОС установлены все обновления.
1. Отключены автоматические обновления.
1. Операционная система "чистая", не установлено никаких дополнительных программ, кроме тестируемых браузеров.
1. Тесты проводятся не на "живом интернете", а на записанных слепках сайтов (wpr). Это важно, так как сайты могут менять отдаваемый контент, рекламу с течением времени и для разных браузеров. 
1. Отключены Prefetch, Superfetch, SearchIndexer.
1. Отсутствует файла подкачки.
1. Запрещена работа фоновой дефрагментации. 
1. Стабильна температуру в помещении
1. Делаются паузы между тестами, чтобы нагрев от предыдущего прогона не влиял на емкость батареи и потребление энергии в следующем
1. Яркость подсветки матрицы снижена до минимума
1. Частота процессора заблокирована (не меняется от нагрузки). Схеме электропитания - "Максимальная производительность".
1. Разрешение дисплея "родное" - 1366x768. Частота обновления установлена в 60Hz, контролируется, что после отключении питания она не была изменена.
1. Звук выключен.
1. Сервис, отдающий слепки сайтов (wpr), запущен на отдельной машине.
1. Так как браузеры Microsoft Edge и Mozilla Firefox не предоставляют встроенных возможностей для игнорированя соответствия имени домена с TLS сертификатом, то мы создали самоподписанный сертификат для корневого центра сертификации.

Все измерения проводились минимум по три раза, за результат бралось среднее. При этом разброс между замерами в одной конфигурации составлял 1-5 минут, что значительно меньше разницы во времени работы ноутбука с разными браузерами, которая составляет до 30 минут. Это говорит о том, что методика хорошо исключает внешние факторы и позволяет замерить именно потребление браузеров.
Однако иногда встречались выбросы, когда результаты отличались от типичных на 15 и более минут. В таких случаях мы считаем что проявляет себя какой-то внешний не учтенный фактор, и эти результаты не учитывались, а проводился еще один замер. 


# Характеристики ноутбука

Dell Latitude 6330  
Battery Dell Type RFJMW 5.5Ah 65Wh 11.1V  
CPU Intel Core i7 3540M 3.00Ghz  
DDR3 8Gb  
HD Intel HD Graphics 4000  
Display 60Hz  
SSD Samsung PM841 256Gb  
Ethernet Adapter Intel 82579LM  

# Операционная система

Windows 10 64-bit version 1709 (16299.15.amd64fre.rs3_release.170928-1534)